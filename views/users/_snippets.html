{% import './../_partials.html' as partials %}

{% macro userSummary(user) -%}
  <div class="row">
    <div class="col-md-6 col-md-offset-3">
      <span class="glyphicon glyphicon-user pull-right" aria-hidden="true" style="font-size: 12rem"title="debería ir una imagen aca"></span>
      <h3><a href="/users/{{user._id}}">{{user.name}}</a></h3>
        <div class="btn-group">
          <a href="/users/{{user._id}}/edit" class="btn btn-xs btn-primary" title="Editar usuario">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
          </a>
        </div>

        <div class="btn-group">
          <form action="/users/{{user._id}}" method="POST">
            <input type="hidden" name="_method" value="DELETE">
            <input type="hidden" name="_csrf" value="{{_csrf}}">
            <button type="submit" class="btn btn-xs btn-danger" title="Borrar ususario">
              <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
            </button>
          </form>
        </div>
      <p>
        Rol: {{user.role}}
      </p>
      <p>
        Mail: {{user.email}}
      </p>
    </div>
  </div>
{%- endmacro %}

{% macro userForm(user) %}
  {# chanchada, sacar esto #}
  {% set roleOpt = [
    { value: 'admin', description: 'Administrador'},
    { value: 'evaluator', description: 'Evaluador'},
    { value: 'owner', description: 'Responsable'}
  ] %}

  <div class="form-group {% if (formErr.name) %} has-error {% endif %}">
    <label for="name">Nombre <span class="text-danger">*</span></label>
    <input type="text" class="form-control" id="name" name="name" value="{{user.name}}" required autofocus>
    {% if formErr.name %}
      <span class="help-block">{{ formErr.name.msg }}</span>
    {% endif %}
  </div>
  <div class="form-group {% if (formErr.email) %} has-error {% endif %}">
    <label for="email">Mail <span class="text-danger">*</span></label>
    <input type="email" class="form-control" id="email" name="email" value="{{user.email}}" required>
    {% if formErr.email %}
      <span class="help-block">{{ formErr.email.msg }}</span>
    {% endif %}
  </div>
  <div class="form-group {% if (formErr.password) %} has-error {% endif %}">
    <label for="password">Contraseña <span class="text-danger">*</span></label>
    <input type="password" class="form-control" id="password" name="password" required>
    {% if formErr.password %}
      <span class="help-block">{{ formErr.password.msg }}</span>
    {% endif %}
  </div>
  <div class="form-group {% if (formErr.role) %} has-error {% endif %}">
    <label for="role">Rol <span class="text-danger">*</span></label>
    <select class="form-control" id="role" name ="role" required>
      {{ partials.creatSelectOptions(roleOpt, user.role) }}
    </select>
    {% if formErr.role %}
      <span class="help-block">{{ formErr.role.msg }}</span>
    {% endif %}
  </div>
  <p class="help-block">
    <span class="text-danger">*</span> Requerido
  </p>
{% endmacro %}
